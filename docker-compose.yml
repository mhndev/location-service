version: '2'

volumes:
  vol-logs-web-server:
    #### - /data/logs
  vol-logs-elasticsearch:
    #### - /usr/share/elasticsearch/data

services:

  ## --------------------------------------------
  ## | Web Server Php7 and required Extensions
  ## --------------------------------------------
  web-server:
    build:
      context: ./.docker-compose/web-server
      dockerfile: Dockerfile
    image: location_web-server
    ports:
     - "8888:80"
    volumes:
     - ./app/:/var/www/
     - ./.docker-compose/web-server/app/.env:/docker/app/.env
     - ./.docker-compose/web-server/feed/:/docker/feed/
     - vol-logs-web-server:/data/logs/

  ## --------------------------------------------
  ## | Elastic Search
  ## --------------------------------------------
  elasticsearch:
    image: elasticsearch:2.4.2
    expose:
     - "9200"
    volumes:
     - vol-logs-elasticsearch:/usr/share/elasticsearch/data
     - ./.docker-compose/elasticsearch/config/:/usr/share/elasticsearch/config/

    environments:
      - ES_HEAP_SIZE:1g
